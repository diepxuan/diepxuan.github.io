<!DOCTYPE html>
<html>
<head>
    <title>Test JavaScript Redirect</title>
    <script>
        // Test script tương tự layout
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test script loaded');
            
            // Simulate wrong URL
            var testWrongUrl = '/van-ban/chu-de/de-muc/bao-hiem-y-te/';
            var wrongPattern = /^\/van-ban\/chu-de\/de-muc\/([^\/]+)\/$/;
            var match = testWrongUrl.match(wrongPattern);
            
            if (match) {
                console.log('Pattern matched! Slug:', match[1]);
                console.log('Would redirect to:', '/van-ban/de-muc/' + match[1] + '/');
                
                // Actually test with current URL
                var currentPath = window.location.pathname;
                console.log('Current path:', currentPath);
                
                var realMatch = currentPath.match(wrongPattern);
                if (realMatch) {
                    console.log('REAL MATCH! Redirecting...');
                    var slug = realMatch[1];
                    window.location.replace('/van-ban/de-muc/' + slug + '/');
                }
            }
        });
    </script>
</head>
<body>
    <h1>Test JavaScript Redirect</h1>
    <p>Kiểm tra JavaScript redirect cho URL sai.</p>
    
    <h2>Test Cases:</h2>
    <ul>
        <li><a href="https://docs.diepxuan.com/van-ban/chu-de/de-muc/bao-hiem-y-te/">URL sai: /van-ban/chu-de/de-muc/bao-hiem-y-te/</a></li>
        <li><a href="https://docs.diepxuan.com/van-ban/de-muc/bao-hiem-y-te/">URL đúng: /van-ban/de-muc/bao-hiem-y-te/</a></li>
    </ul>
    
    <h2>Kiểm tra layout hiện tại:</h2>
    <p><a href="https://docs.diepxuan.com/van-ban/" target="_blank">Trang chính</a> - View source để xem có JavaScript không</p>
    
    <h2>Console Log:</h2>
    <div id="console"></div>
    
    <script>
        // Hiển thị console log
        var originalLog = console.log;
        console.log = function() {
            originalLog.apply(console, arguments);
            var args = Array.prototype.slice.call(arguments);
            document.getElementById('console').innerHTML += args.join(' ') + '<br>';
        };
        
        console.log('Page loaded at:', new Date().toLocaleTimeString());
    </script>
</body>
</html>