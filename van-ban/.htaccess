# Apache .htaccess redirects for van-ban
# Fix wrong URLs: /van-ban/chu-de/de-muc/ → /van-ban/de-muc/

RewriteEngine On
RewriteBase /van-ban/

# 1. Redirect wrong pattern: /chu-de/de-muc/slug/ → /de-muc/slug/
RewriteRule ^chu-de/de-muc/(.+)$ de-muc/$1 [R=301,L]

# 2. Redirect wrong pattern without trailing slash
RewriteRule ^chu-de/de-muc/([^/.]+)$ de-muc/$1/ [R=301,L]

# 3. Ensure trailing slashes for correct URLs
RewriteCond %{REQUEST_URI} /+[^\.]+$
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301,L]

# 4. Remove .html extensions
RewriteRule ^(.+)\.html$ $1/ [R=301,L]

# 5. Security headers
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "SAMEORIGIN"
Header set X-XSS-Protection "1; mode=block"